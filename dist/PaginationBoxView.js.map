{"version":3,"sources":["../react_components/PaginationBoxView.js"],"names":["PaginationBoxView","props","handlePreviousPage","evt","preventDefault","returnValue","state","selected","handlePageSelected","handleNextPage","pageCount","setState","callCallback","selectedItem","onPageChange","pagination","items","pageRangeDisplayed","index","getPageElement","leftSide","rightSide","page","breakView","createPageView","marginPagesDisplayed","keys","Object","breakLabelKey","length","breakLabelValue","breakLabel","breakClassName","initialPage","forcePage","disableInitialCallback","nextProps","pageIndex","hrefBuilder","bind","pageClassName","pageLinkClassName","activeClassName","extraAriaContext","disabled","disabledClassName","containerClassName","previousLinkClassName","previousLabel","nextLinkClassName","nextLabel","propTypes","number","isRequired","node","func","bool","string","previousClassName","nextClassName","defaultProps"],"mappings":"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","file":"PaginationBoxView.js","sourcesContent":["'use strict';\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport createFragment from 'react-addons-create-fragment';\nimport PageView from './PageView';\nimport BreakView from './BreakView';\n\n\nexport default class PaginationBoxView extends Component {\n  static propTypes = {\n    pageCount             : PropTypes.number.isRequired,\n    pageRangeDisplayed    : PropTypes.number.isRequired,\n    marginPagesDisplayed  : PropTypes.number.isRequired,\n    previousLabel         : PropTypes.node,\n    nextLabel             : PropTypes.node,\n    breakLabel            : PropTypes.node,\n    hrefBuilder           : PropTypes.func,\n    onPageChange          : PropTypes.func,\n    initialPage           : PropTypes.number,\n    forcePage             : PropTypes.number,\n    disableInitialCallback: PropTypes.bool,\n    containerClassName    : PropTypes.string,\n    pageClassName         : PropTypes.string,\n    pageLinkClassName     : PropTypes.string,\n    activeClassName       : PropTypes.string,\n    previousClassName     : PropTypes.string,\n    nextClassName         : PropTypes.string,\n    previousLinkClassName : PropTypes.string,\n    nextLinkClassName     : PropTypes.string,\n    disabledClassName     : PropTypes.string,\n    breakClassName        : PropTypes.string\n  };\n\n  static defaultProps = {\n    pageCount             : 10,\n    pageRangeDisplayed    : 2,\n    marginPagesDisplayed  : 3,\n    activeClassName       : \"selected\",\n    previousClassName     : \"previous\",\n    nextClassName         : \"next\",\n    previousLabel         : \"Previous\",\n    nextLabel             : \"Next\",\n    breakLabel            : \"...\",\n    disabledClassName     : \"disabled\",\n    disableInitialCallback: false\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selected: props.initialPage ? props.initialPage :\n                props.forcePage   ? props.forcePage :\n                0\n    };\n  }\n\n  componentDidMount() {\n    // Call the callback with the initialPage item:\n    if (typeof(this.props.initialPage) !== 'undefined' && !this.props.disableInitialCallback) {\n      this.callCallback(this.props.initialPage);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (typeof(nextProps.forcePage) !== 'undefined' && this.props.forcePage !== nextProps.forcePage) {\n      this.setState({selected: nextProps.forcePage});\n    }\n  }\n\n  handlePreviousPage = evt => {\n    evt.preventDefault ? evt.preventDefault() : (evt.returnValue = false);\n    if (this.state.selected > 0) {\n      this.handlePageSelected(this.state.selected - 1, evt);\n    }\n  };\n\n  handleNextPage = evt => {\n    evt.preventDefault ? evt.preventDefault() : (evt.returnValue = false);\n    if (this.state.selected < this.props.pageCount - 1) {\n      this.handlePageSelected(this.state.selected + 1, evt);\n    }\n  };\n\n  handlePageSelected = (selected, evt) => {\n    evt.preventDefault ? evt.preventDefault() : (evt.returnValue = false);\n\n    if (this.state.selected === selected) return;\n\n    this.setState({selected: selected});\n\n    // Call the callback with the new selected item:\n    this.callCallback(selected);\n  };\n\n  hrefBuilder(pageIndex) {\n    if (this.props.hrefBuilder &&\n      pageIndex !== this.state.selected &&\n      pageIndex >= 0 &&\n      pageIndex < this.props.pageCount\n    ) {\n      return this.props.hrefBuilder(pageIndex + 1);\n    }\n  }\n\n  callCallback = (selectedItem) => {\n    if (typeof(this.props.onPageChange) !== \"undefined\" &&\n        typeof(this.props.onPageChange) === \"function\") {\n      this.props.onPageChange({selected: selectedItem});\n    }\n  };\n\n  getPageElement(index) {\n    return <PageView\n      onClick={this.handlePageSelected.bind(null, index)}\n      selected={this.state.selected === index}\n      pageClassName={this.props.pageClassName}\n      pageLinkClassName={this.props.pageLinkClassName}\n      activeClassName={this.props.activeClassName}\n      extraAriaContext={this.props.extraAriaContext}\n      href={this.hrefBuilder(index)}\n      page={index + 1} />\n  }\n\n  pagination = () => {\n    let items = {};\n\n    if (this.props.pageCount <= this.props.pageRangeDisplayed) {\n\n      for (let index = 0; index < this.props.pageCount; index++) {\n        items['key' + index] = this.getPageElement(index);\n      }\n\n    } else {\n\n      let leftSide  = (this.props.pageRangeDisplayed / 2);\n      let rightSide = (this.props.pageRangeDisplayed - leftSide);\n\n      if (this.state.selected > this.props.pageCount - this.props.pageRangeDisplayed / 2) {\n        rightSide = this.props.pageCount - this.state.selected;\n        leftSide  = this.props.pageRangeDisplayed - rightSide;\n      }\n      else if (this.state.selected < this.props.pageRangeDisplayed / 2) {\n        leftSide  = this.state.selected;\n        rightSide = this.props.pageRangeDisplayed - leftSide;\n      }\n\n      let index;\n      let page;\n      let breakView;\n      let createPageView = (index) => this.getPageElement(index);\n\n      for (index = 0; index < this.props.pageCount; index++) {\n\n        page = index + 1;\n\n        if (page <= this.props.marginPagesDisplayed) {\n          items['key' + index] = createPageView(index);\n          continue;\n        }\n\n        if (page > this.props.pageCount - this.props.marginPagesDisplayed) {\n          items['key' + index] = createPageView(index);\n          continue;\n        }\n\n        if ((index >= this.state.selected - leftSide) && (index <= this.state.selected + rightSide)) {\n          items['key' + index] = createPageView(index);\n          continue;\n        }\n\n        let keys            = Object.keys(items);\n        let breakLabelKey   = keys[keys.length - 1];\n        let breakLabelValue = items[breakLabelKey];\n\n        if (this.props.breakLabel && breakLabelValue !== breakView) {\n          breakView = (\n            <BreakView\n              breakLabel={this.props.breakLabel}\n              breakClassName={this.props.breakClassName}\n            />\n          );\n\n          items['key' + index] = breakView;\n        }\n      }\n    }\n\n    return items;\n  };\n\n  render() {\n    let disabled = this.props.disabledClassName;\n\n    return (\n      <div className={this.props.containerClassName}>\n        {this.state.selected != 0 &&\n            <a onClick={this.handlePreviousPage}\n               className={this.props.previousLinkClassName}\n               href={this.hrefBuilder(this.state.selected - 1)}\n               tabIndex=\"0\"\n               onKeyPress={this.handlePreviousPage}>\n              {this.props.previousLabel}\n            </a>\n        }\n\n        {createFragment(this.pagination())}\n\n        {this.state.selected + 1 != this.props.pageCount &&\n          <a onClick={this.handleNextPage}\n             className={this.props.nextLinkClassName}\n             href={this.hrefBuilder(this.state.selected + 1)}\n             tabIndex=\"0\"\n             onKeyPress={this.handleNextPage}>\n            {this.props.nextLabel}\n          </a>\n        }\n      </div>\n    );\n  }\n};\n"]}